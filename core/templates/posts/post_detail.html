{% extends 'base.html' %}

{% block title %}
   {{ post.title }} - {{ block.super }}
{% endblock %}




{% block content %}

<div class="my-3">

    <div class="content px-3 py-3">
        <div class="mt-2 mx-3 inner">
            <img class="card-img-top" src="{{ post.image.url }}" alt="">
        </div>
        <div class="card-body">
            <h3 class="card-title text-center">{{ post.title }}</h3>
            <h6 style="color:grey;">{{ post.created }}</h6>
            <h6>By {{ post.author.username }}</h6>
            <p class="card-text"><em>{{ post.content|safe }}</em></p>
        </div>
    </div>

    <div class="sidebar px-3 py-3">
        <h4>Most commented Posts</h4>
        <a href="#" class="d-block">Link 1</a>
        <a href="#" class="d-block">Link 2</a>
        <a href="#" class="d-block">Link 3</a>
        <hr>
        <h4 class="mt-3">Most liked Posts</h4>
        <a href="#" class="d-block">Link 1</a>
        <a href="#" class="d-block">Link 2</a>
        <a href="#" class="d-block">Link 3</a>
    </div>


</div>


{% if request.user == post.author or profile.is_admin %}
    <div class="admin-panel align-items-center">
        {% if profile.is_admin %}
            <a href="/admin" class = 'btn btn-outline-primary'>Admin</a>
        {% endif %}
        <!--    TODO: text-colors hover    -->
        <a href="#" class='create-post btn btn-outline-success d-block'>Create Post</a>
        <a href="#" class = 'update-post btn btn-outline-warning d-block' data-item-id="{% url 'posts:post_update' post_slug=post.slug %}">Edit Post</a>
        <a href="#" class = 'delete-post btn btn-danger d-block' data-item-id="{% url 'posts:post_delete' post.pk %}">Delete Post</a>
    </div>
{% endif %}


{% endblock %}


{% block js %}

<script>
<!-- HIDE MESSAGES -->
$(function () {

      // Create post button
      $(".create-post").each(function () {
        $('#change-modal').removeClass('modal-dialog');
        $('#change-modal').addClass('modal-dialog modal-lg');
        $(this).modalForm({formURL: "{% url 'posts:post_create' %}"});
      });

      // Update post buttons
      $(".update-post").each(function () {
        $(this).modalForm({formURL: $(this).data('item-id')});
      });

      // Delete post buttons
      $(".delete-post").each(function () {
        $(this).modalForm({formURL: $(this).data('item-id')});
      });

    // Hide message
    $(".alert").fadeTo(4000, 500).slideUp(500, function(){
        $(".alert").slideUp(500);
    });

});
</script>

{% endblock %}
